$('#success_explanation p,#error_explanation p').html('');

<% if @success %>
  <% message = "Grade for #{@course_user_grade.user.human_name} was successfully saved at #{Time.now.to_formatted_s(:db)}." %>
  $('#success_explanation p').html("<%= escape_javascript(message) %>");
  decorateEarnedGrade('<%= @course_user_grade.user_id %>', '<%= @course_user_grade.grade %>');
  $('#notify_<%= @course_user_grade.user.id %>').html('<%= escape_javascript(render partial: 'course_user_grades/notify_final_grade_form', locals: {course: @course_user_grade.course, member: @course_user_grade.user}) %>');
  $('#notify_<%= @course_user_grade.user.id %>').append('<%= escape_javascript(image_tag 'ajax-loader-small.gif', class: "notify-loader", id: "notify-loader-#{@course_user_grade.user.id}") %>')
<% else %>
  <% @message ||= "Grade for #{@course_user_grade.user.human_name} was not successfully saved." %>
  $('#error_explanation p').html("<%= escape_javascript(@message) %>");
<% end %>

$('#grade-loader-<%= @course_user_grade.user.id %>').hide();
$('#notify-loader-<%= @course_user_grade.user.id %>').hide();