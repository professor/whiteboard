<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>Class: Course</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>app/models/course.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">ActiveRecord::Base
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-copy_courses_from_a_semester_to_next_year">::copy_courses_from_a_semester_to_next_year</a>
    
    <li><a href="#method-c-current_semester_courses">::current_semester_courses</a>
    
    <li><a href="#method-c-first_offering_for_course_name">::first_offering_for_course_name</a>
    
    <li><a href="#method-c-for_semester">::for_semester</a>
    
    <li><a href="#method-c-last_offering">::last_offering</a>
    
    <li><a href="#method-c-next_semester_courses">::next_semester_courses</a>
    
    <li><a href="#method-c-remind_about_effort_course_list">::remind_about_effort_course_list</a>
    
    <li><a href="#method-i-auto_generated_peer_evaluation_date_end">#auto_generated_peer_evaluation_date_end</a>
    
    <li><a href="#method-i-auto_generated_peer_evaluation_date_start">#auto_generated_peer_evaluation_date_start</a>
    
    <li><a href="#method-i-auto_generated_twiki_url">#auto_generated_twiki_url</a>
    
    <li><a href="#method-i-build_email">#build_email</a>
    
    <li><a href="#method-i-copy_as_new_course">#copy_as_new_course</a>
    
    <li><a href="#method-i-course_end">#course_end</a>
    
    <li><a href="#method-i-course_length">#course_length</a>
    
    <li><a href="#method-i-course_start">#course_start</a>
    
    <li><a href="#method-i-current_mini-3F">#current_mini?</a>
    
    <li><a href="#method-i-deliverables">#deliverables</a>
    
    <li><a href="#method-i-display_course_name">#display_course_name</a>
    
    <li><a href="#method-i-display_name">#display_name</a>
    
    <li><a href="#method-i-display_semester">#display_semester</a>
    
    <li><a href="#method-i-invalidate_distribution_list">#invalidate_distribution_list</a>
    
    <li><a href="#method-i-map_faculty_strings_to_users">#map_faculty_strings_to_users</a>
    
    <li><a href="#method-i-need_to_update_google_list-3F">#need_to_update_google_list?</a>
    
    <li><a href="#method-i-set_grading_ranges">#set_grading_ranges</a>
    
    <li><a href="#method-i-short_or_full_name">#short_or_full_name</a>
    
    <li><a href="#method-i-sortable_value">#sortable_value</a>
    
    <li><a href="#method-i-strip_whitespaces">#strip_whitespaces</a>
    
    <li><a href="#method-i-submittable_assignments">#submittable_assignments</a>
    
    <li><a href="#method-i-update_distribution_list">#update_distribution_list</a>
    
    <li><a href="#method-i-update_email_address">#update_email_address</a>
    
    <li><a href="#method-i-update_faculty">#update_faculty</a>
    
    <li><a href="#method-i-validate_faculty">#validate_faculty</a>
    
    <li><a href="#method-i-validate_grading_ranges">#validate_grading_ranges</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    
    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./Ability.html">Ability</a>
  
    <li><a href="./AcademicCalendar.html">AcademicCalendar</a>
  
    <li><a href="./Assignment.html">Assignment</a>
  
    <li><a href="./Course.html">Course</a>
  
    <li><a href="./CourseNumber.html">CourseNumber</a>
  
    <li><a href="./DelayedSystemJob.html">DelayedSystemJob</a>
  
    <li><a href="./Deliverable.html">Deliverable</a>
  
    <li><a href="./DeliverableAttachment.html">DeliverableAttachment</a>
  
    <li><a href="./EffortLog.html">EffortLog</a>
  
    <li><a href="./EffortLogLineItem.html">EffortLogLineItem</a>
  
    <li><a href="./FacultyAssignment.html">FacultyAssignment</a>
  
    <li><a href="./GradingRange.html">GradingRange</a>
  
    <li><a href="./Page.html">Page</a>
  
    <li><a href="./PageAttachment.html">PageAttachment</a>
  
    <li><a href="./PageComment.html">PageComment</a>
  
    <li><a href="./PageCommentType.html">PageCommentType</a>
  
    <li><a href="./PeerEvaluationLearningObjective.html">PeerEvaluationLearningObjective</a>
  
    <li><a href="./PeerEvaluationReport.html">PeerEvaluationReport</a>
  
    <li><a href="./PeerEvaluationReview.html">PeerEvaluationReview</a>
  
    <li><a href="./Person.html">Person</a>
  
    <li><a href="./Presentation.html">Presentation</a>
  
    <li><a href="./PresentationFeedback.html">PresentationFeedback</a>
  
    <li><a href="./PresentationFeedbackAnswer.html">PresentationFeedbackAnswer</a>
  
    <li><a href="./PresentationQuestion.html">PresentationQuestion</a>
  
    <li><a href="./RegisteredCourse.html">RegisteredCourse</a>
  
    <li><a href="./Registration.html">Registration</a>
  
    <li><a href="./RssFeed.html">RssFeed</a>
  
    <li><a href="./ScottyDogSaying.html">ScottyDogSaying</a>
  
    <li><a href="./SponsoredProject.html">SponsoredProject</a>
  
    <li><a href="./SponsoredProjectAllocation.html">SponsoredProjectAllocation</a>
  
    <li><a href="./SponsoredProjectEffort.html">SponsoredProjectEffort</a>
  
    <li><a href="./SponsoredProjectSponsor.html">SponsoredProjectSponsor</a>
  
    <li><a href="./StrengthTheme.html">StrengthTheme</a>
  
    <li><a href="./Suggestion.html">Suggestion</a>
  
    <li><a href="./TaskType.html">TaskType</a>
  
    <li><a href="./Team.html">Team</a>
  
    <li><a href="./TeamAssignment.html">TeamAssignment</a>
  
    <li><a href="./User.html">User</a>
  
    <li><a href="./UserPreference.html">UserPreference</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Course</h1>

  <div id="description" class="description">
    
<p><a href="Course.html">Course</a> represents a course taught at CMU-SV.</p>

<p>At present, there is no distinction between sections of a course. Each team
can belong to a “section” which is only a labeled text field.</p>

<h2 id="label-Adding+a+Course+Offering">Adding a <a href="Course.html">Course</a> Offering</h2>

<p>Sometime before a new semester starts, Gerry will create all the courses
for the next semester. The HUB has a deadline for updating their system
with courses, once that deadline has passed, Gerry typically will update
the rails system. A course can be added/removed/modified after this
deadline, and the information in the rails system should be updated. When
Gerry creates a course, its will the minimal necessary information. When
the course is created, certain information is copied from the previous
offering of the same course, where as other information must not be copied.</p>

<p>The CMU-SV community typically does not refer to courses by their number,
where as on the Pittsburgh campus, most undergraduate courses are referred
to by their number.</p>

<p>The system asks for the tuple (course_number, semester, and year) to create
the course and then puts the user in an edit mode prompting reasonable
defaults from the last time the course was offered. If nothing has changed,
it’s easy for Gerry to create the next course. If the instructor has
changed then it’s easy to edit that information</p>

<h2 id="label-Notifying+instructors">Notifying instructors</h2>

<p>Whenever an instructor is added to a course, they are notified about the
change, asking them to review the course options. We ask that one of the
instructors confirm the settings, when this happens we consider that the
faculty has “configured” the course. (Or verified it’s settings.) If this
doesn’t happen, the system should periodically remind faculty about the
change.)</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-faculty_assignments_override" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">faculty_assignments_override</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>When assigning faculty to a page, the user types in a series of strings
that then need to be processed</p>

<pre>:faculty_assignments_override is a temporary variable that is used to do validation of the strings (to verify
that they are people in the system) and then to save the people in the faculty association.</pre>
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-copy_courses_from_a_semester_to_next_year" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">copy_courses_from_a_semester_to_next_year</span><span
            class="method-args">(semester, year)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="copy_courses_from_a_semester_to_next_year-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 262</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">copy_courses_from_a_semester_to_next_year</span>(<span class="ruby-identifier">semester</span>, <span class="ruby-identifier">year</span>)
  <span class="ruby-identifier">next_year</span> = <span class="ruby-identifier">year</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Course</span>.<span class="ruby-identifier">for_semester</span>(<span class="ruby-identifier">semester</span>, <span class="ruby-identifier">next_year</span>).<span class="ruby-identifier">empty?</span>
    <span class="ruby-constant">Course</span>.<span class="ruby-identifier">for_semester</span>(<span class="ruby-identifier">semester</span>, <span class="ruby-identifier">year</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">last_year_course</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">next_year_course</span> = <span class="ruby-identifier">last_year_course</span>.<span class="ruby-identifier">copy_as_new_course</span>
      <span class="ruby-identifier">next_year_course</span>.<span class="ruby-identifier">peer_evaluation_first_email</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>.<span class="ruby-identifier">year</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">next_year_course</span>.<span class="ruby-identifier">peer_evaluation_first_email</span>
      <span class="ruby-identifier">next_year_course</span>.<span class="ruby-identifier">peer_evaluation_second_email</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>.<span class="ruby-identifier">year</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">next_year_course</span>.<span class="ruby-identifier">peer_evaluation_second_email</span>
      <span class="ruby-identifier">next_year_course</span>.<span class="ruby-identifier">year</span> = <span class="ruby-identifier">next_year</span>
      <span class="ruby-identifier">next_year_course</span>.<span class="ruby-identifier">save</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;There are already courses in semester #{semester} #{next_year}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- copy_courses_from_a_semester_to_next_year-source -->
          
        </div>

        

        
      </div><!-- copy_courses_from_a_semester_to_next_year-method -->

    
      <div id="method-c-current_semester_courses" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">current_semester_courses</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="current_semester_courses-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 104</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">current_semester_courses</span>()
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">for_semester</span>(<span class="ruby-constant">AcademicCalendar</span>.<span class="ruby-identifier">current_semester</span>(),
                           <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>.<span class="ruby-identifier">year</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- current_semester_courses-source -->
          
        </div>

        

        
      </div><!-- current_semester_courses-method -->

    
      <div id="method-c-first_offering_for_course_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">first_offering_for_course_name</span><span
            class="method-args">(course_name)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="first_offering_for_course_name-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 96</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">first_offering_for_course_name</span>(<span class="ruby-identifier">course_name</span>)
  <span class="ruby-constant">Course</span>.<span class="ruby-identifier">with_course_name</span>(<span class="ruby-identifier">course_name</span>).<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- first_offering_for_course_name-source -->
          
        </div>

        

        
      </div><!-- first_offering_for_course_name-method -->

    
      <div id="method-c-for_semester" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">for_semester</span><span
            class="method-args">(semester, year)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="for_semester-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 100</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">for_semester</span>(<span class="ruby-identifier">semester</span>, <span class="ruby-identifier">year</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-constant">Course</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:semester</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">semester</span>, <span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">year</span>).<span class="ruby-identifier">order</span>(<span class="ruby-string">&quot;name ASC&quot;</span>).<span class="ruby-identifier">all</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- for_semester-source -->
          
        </div>

        

        
      </div><!-- for_semester-method -->

    
      <div id="method-c-last_offering" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">last_offering</span><span
            class="method-args">(course_number)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Find the last time this course was offered</p>
          

          
          <div class="method-source-code" id="last_offering-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 255</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">last_offering</span>(<span class="ruby-identifier">course_number</span>)
  <span class="ruby-comment">#TODO: move this sorting into the database</span>
  <span class="ruby-identifier">offerings</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">find_all_by_number</span>(<span class="ruby-identifier">course_number</span>)
  <span class="ruby-identifier">offerings</span> = <span class="ruby-identifier">offerings</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-operator">-</span><span class="ruby-identifier">c</span>.<span class="ruby-identifier">sortable_value</span> } <span class="ruby-comment"># note the '-' is for desc sorting</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">offerings</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- last_offering-source -->
          
        </div>

        

        
      </div><!-- last_offering-method -->

    
      <div id="method-c-next_semester_courses" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">next_semester_courses</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="next_semester_courses-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 109</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">next_semester_courses</span>()
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">for_semester</span>(<span class="ruby-constant">AcademicCalendar</span>.<span class="ruby-identifier">next_semester</span>(),
                           <span class="ruby-constant">AcademicCalendar</span>.<span class="ruby-identifier">next_semester_year</span>())
<span class="ruby-keyword">end</span></pre>
          </div><!-- next_semester_courses-source -->
          
        </div>

        

        
      </div><!-- next_semester_courses-method -->

    
      <div id="method-c-remind_about_effort_course_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remind_about_effort_course_list</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="remind_about_effort_course_list-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 175</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">remind_about_effort_course_list</span>
  <span class="ruby-identifier">courses</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:remind_about_effort</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>.<span class="ruby-identifier">cwyear</span>, <span class="ruby-value">:semester</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">AcademicCalendar</span>.<span class="ruby-identifier">current_semester</span>(), <span class="ruby-value">:mini</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Both&quot;</span>).<span class="ruby-identifier">all</span>
  <span class="ruby-identifier">courses</span> = <span class="ruby-identifier">courses</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Course</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:remind_about_effort</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>.<span class="ruby-identifier">cwyear</span>, <span class="ruby-value">:semester</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">AcademicCalendar</span>.<span class="ruby-identifier">current_semester</span>(), <span class="ruby-value">:mini</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">AcademicCalendar</span>.<span class="ruby-identifier">current_mini</span>).<span class="ruby-identifier">all</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">courses</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- remind_about_effort_course_list-source -->
          
        </div>

        

        
      </div><!-- remind_about_effort_course_list-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-auto_generated_peer_evaluation_date_end" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">auto_generated_peer_evaluation_date_end</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="auto_generated_peer_evaluation_date_end-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 189</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">auto_generated_peer_evaluation_date_end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">commercial</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">year</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">course_start</span> <span class="ruby-operator">+</span> <span class="ruby-value">7</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- auto_generated_peer_evaluation_date_end-source -->
          
        </div>

        

        
      </div><!-- auto_generated_peer_evaluation_date_end-method -->

    
      <div id="method-i-auto_generated_peer_evaluation_date_start" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">auto_generated_peer_evaluation_date_start</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="auto_generated_peer_evaluation_date_start-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 185</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">auto_generated_peer_evaluation_date_start</span>
  <span class="ruby-keyword">return</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">commercial</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">year</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">course_start</span> <span class="ruby-operator">+</span> <span class="ruby-value">6</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- auto_generated_peer_evaluation_date_start-source -->
          
        </div>

        

        
      </div><!-- auto_generated_peer_evaluation_date_start-method -->

    
      <div id="method-i-auto_generated_twiki_url" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">auto_generated_twiki_url</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="auto_generated_twiki_url-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 181</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">auto_generated_twiki_url</span>
  <span class="ruby-keyword">return</span> <span class="ruby-node">&quot;http://info.sv.cmu.edu/do/view/#{self.semester}#{self.year}/#{self.short_or_full_name}/WebHome&quot;</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">' '</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- auto_generated_twiki_url-source -->
          
        </div>

        

        
      </div><!-- auto_generated_twiki_url-method -->

    
      <div id="method-i-copy_as_new_course" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">copy_as_new_course</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="copy_as_new_course-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 242</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">copy_as_new_course</span>
  <span class="ruby-identifier">new_course</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">clone</span>
  <span class="ruby-identifier">new_course</span>.<span class="ruby-identifier">is_configured</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">new_course</span>.<span class="ruby-identifier">configured_by</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">new_course</span>.<span class="ruby-identifier">updated_by</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">new_course</span>.<span class="ruby-identifier">created_at</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">new_course</span>.<span class="ruby-identifier">updated_at</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">new_course</span>.<span class="ruby-identifier">curriculum_url</span> = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">curriculum_url</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">curriculum_url</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;twiki&quot;</span>)
  <span class="ruby-identifier">new_course</span>.<span class="ruby-identifier">faculty</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">faculty</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">new_course</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- copy_as_new_course-source -->
          
        </div>

        

        
      </div><!-- copy_as_new_course-method -->

    
      <div id="method-i-course_end" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">course_end</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Return the week number of the year for the end of a course</p>
          

          
          <div class="method-source-code" id="course_end-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">course_end</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">course_start</span> <span class="ruby-operator">+</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">course_length</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- course_end-source -->
          
        </div>

        

        
      </div><!-- course_end-method -->

    
      <div id="method-i-course_length" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">course_length</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="course_length-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 114</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">course_length</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mini</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Both&quot;</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">semester</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Summer&quot;</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">return</span> <span class="ruby-value">12</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">semester</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Fall&quot;</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">return</span> <span class="ruby-value">15</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-value">16</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">semester</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Summer&quot;</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">return</span> <span class="ruby-value">6</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-value">7</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- course_length-source -->
          
        </div>

        

        
      </div><!-- course_length-method -->

    
      <div id="method-i-course_start" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">course_start</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Return the week number of the year for the start of a course</p>
          

          
          <div class="method-source-code" id="course_start-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 133</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">course_start</span>
  <span class="ruby-identifier">start</span> = <span class="ruby-constant">AcademicCalendar</span>.<span class="ruby-identifier">semester_start</span>(<span class="ruby-identifier">semester</span>, <span class="ruby-identifier">year</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">semester</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Spring&quot;</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mini</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;B&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">start</span> <span class="ruby-operator">+</span> <span class="ruby-value">9</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">start</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">semester</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Summer&quot;</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mini</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;B&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">start</span> <span class="ruby-operator">+</span> <span class="ruby-value">6</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">start</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">semester</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Fall&quot;</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mini</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;B&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">start</span> <span class="ruby-operator">+</span> <span class="ruby-value">8</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">start</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-value">0</span> <span class="ruby-comment">#If the semester field isn't set</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- course_start-source -->
          
        </div>

        

        
      </div><!-- course_start-method -->

    
      <div id="method-i-current_mini-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">current_mini?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="current_mini-3F-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 277</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">current_mini?</span>
  <span class="ruby-keyword">case</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mini</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;Both&quot;</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">year</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>.<span class="ruby-identifier">year</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">semester</span> <span class="ruby-operator">==</span> <span class="ruby-constant">AcademicCalendar</span>.<span class="ruby-identifier">current_semester</span>()
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">year</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>.<span class="ruby-identifier">year</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mini</span> <span class="ruby-operator">==</span> <span class="ruby-constant">AcademicCalendar</span>.<span class="ruby-identifier">current_mini</span>()
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- current_mini-3F-source -->
          
        </div>

        

        
      </div><!-- current_mini-3F-method -->

    
      <div id="method-i-deliverables" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">deliverables</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="deliverables-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 298</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">deliverables</span>
  <span class="ruby-ivar">@deliverables</span> = []
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">assignments</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">assignment</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@deliverables</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">assignment</span>.<span class="ruby-identifier">deliverables</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@deliverables</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- deliverables-source -->
          
        </div>

        

        
      </div><!-- deliverables-method -->

    
      <div id="method-i-display_course_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">display_course_name</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>def to_param</p>

<pre>display_course_name</pre>

<p>end</p>
          

          
          <div class="method-source-code" id="display_course_name-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 76</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">display_course_name</span>
  <span class="ruby-identifier">mini_text</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mini</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Both&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mini</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">short_or_full_name</span> <span class="ruby-operator">+</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">semester</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">mini_text</span> <span class="ruby-operator">+</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">year</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">result</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot; &quot;</span>, <span class="ruby-string">&quot;&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- display_course_name-source -->
          
        </div>

        

        
      </div><!-- display_course_name-method -->

    
      <div id="method-i-display_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">display_name</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="display_name-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 157</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">display_name</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">short_name</span>.<span class="ruby-identifier">blank?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot; (&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">short_name</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;)&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- display_name-source -->
          
        </div>

        

        
      </div><!-- display_name-method -->

    
      <div id="method-i-display_semester" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">display_semester</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="display_semester-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 170</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">display_semester</span>
  <span class="ruby-identifier">mini_text</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mini</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;Both&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mini</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot; &quot;</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">semester</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">mini_text</span> <span class="ruby-operator">+</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">year</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- display_semester-source -->
          
        </div>

        

        
      </div><!-- display_semester-method -->

    
      <div id="method-i-invalidate_distribution_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">invalidate_distribution_list</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="invalidate_distribution_list-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 286</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">invalidate_distribution_list</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">updating_email</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- invalidate_distribution_list-source -->
          
        </div>

        

        
      </div><!-- invalidate_distribution_list-method -->

    
      <div id="method-i-short_or_full_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">short_or_full_name</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="short_or_full_name-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 162</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">short_or_full_name</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">short_name</span>.<span class="ruby-identifier">blank?</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">short_name</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- short_or_full_name-source -->
          
        </div>

        

        
      </div><!-- short_or_full_name-method -->

    
      <div id="method-i-sortable_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sortable_value</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="sortable_value-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 153</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sortable_value</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">year</span>.<span class="ruby-identifier">to_i</span> * <span class="ruby-value">100</span> <span class="ruby-operator">+</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">course_end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- sortable_value-source -->
          
        </div>

        

        
      </div><!-- sortable_value-method -->

    
      <div id="method-i-submittable_assignments" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">submittable_assignments</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="submittable_assignments-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 294</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">submittable_assignments</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">assignments</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">assignment</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assignment</span>.<span class="ruby-identifier">submittable?</span> }
<span class="ruby-keyword">end</span></pre>
          </div><!-- submittable_assignments-source -->
          
        </div>

        

        
      </div><!-- submittable_assignments-method -->

    
      <div id="method-i-update_email_address" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_email_address</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="update_email_address-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 290</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_email_address</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">email</span> = <span class="ruby-identifier">build_email</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- update_email_address-source -->
          
        </div>

        

        
      </div><!-- update_email_address-method -->

    
      <div id="method-i-update_faculty" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_faculty</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="update_faculty-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_faculty</span>
  <span class="ruby-keyword">return</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">faculty_assignments_override</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">faculty</span> = []

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">faculty_assignments_override</span> = <span class="ruby-identifier">faculty_assignments_override</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">strip</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;&quot;</span> }
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">map_faculty_strings_to_users</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">faculty_assignments_override</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Error converting faculty_assignments_override to IDs!&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">list</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">faculty</span> = <span class="ruby-identifier">list</span>
  <span class="ruby-identifier">faculty_assignments_override</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">updating_email</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- update_faculty-source -->
          
        </div>

        

        
      </div><!-- update_faculty-method -->

    
      <div id="method-i-validate_faculty" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">validate_faculty</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>When modifying <a
href="Course.html#method-i-validate_faculty">#validate_faculty</a> or <a
href="Course.html#method-i-update_faculty">#update_faculty</a>, modify the
same code in team.rb Todo - move to a higher class or try as a mixin</p>
          

          
          <div class="method-source-code" id="validate_faculty-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 195</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validate_faculty</span>
  <span class="ruby-keyword">return</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">faculty_assignments_override</span>.<span class="ruby-identifier">nil?</span>

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">faculty_assignments_override</span> = <span class="ruby-identifier">faculty_assignments_override</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">strip</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;&quot;</span> }
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">map_faculty_strings_to_users</span>(<span class="ruby-identifier">faculty_assignments_override</span>)
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">user</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span>(<span class="ruby-value">:base</span>, <span class="ruby-string">&quot;Person &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">faculty_assignments_override</span>[<span class="ruby-identifier">index</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot; not found&quot;</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- validate_faculty-source -->
          
        </div>

        

        
      </div><!-- validate_faculty-method -->

    
      <div id="method-i-validate_grading_ranges" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">validate_grading_ranges</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="validate_grading_ranges-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 219</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validate_grading_ranges</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">grading_ranges</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">grading_range</span><span class="ruby-operator">|</span> <span class="ruby-identifier">grading_range</span>.<span class="ruby-identifier">active</span> }.<span class="ruby-identifier">count</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span>(<span class="ruby-value">:grading_ranges</span>, <span class="ruby-string">&quot;Less than 2 active ranges&quot;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">previous_active_grade_minimum</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">grading_ranges</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">grading_range</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">grading_range</span>.<span class="ruby-identifier">active</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">previous_active_grade_minimum</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">previous_active_grade_minimum</span> = <span class="ruby-identifier">grading_range</span>.<span class="ruby-identifier">minimum</span>
      <span class="ruby-keyword">next</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">grading_range</span>.<span class="ruby-identifier">minimum</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">previous_active_grade_minimum</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span>(<span class="ruby-value">:grading_ranges</span>, <span class="ruby-string">&quot;Number values must be descending by descending grades&quot;</span>)
      <span class="ruby-keyword">break</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">previous_active_grade_minimum</span> = <span class="ruby-identifier">grading_range</span>.<span class="ruby-identifier">minimum</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- validate_grading_ranges-source -->
          
        </div>

        

        
      </div><!-- validate_grading_ranges-method -->

    
    </section><!-- public-instance-method-details -->
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Protected Instance Methods</h3>

    
      <div id="method-i-build_email" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">build_email</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="build_email-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 321</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">build_email</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">short_name</span>.<span class="ruby-identifier">blank?</span>
    <span class="ruby-identifier">email</span> = <span class="ruby-node">&quot;#{self.semester}-#{self.year}-#{self.short_name}&quot;</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/ /</span>, <span class="ruby-string">'-'</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;@&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">GOOGLE_DOMAIN</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">email</span> = <span class="ruby-node">&quot;#{self.semester}-#{self.year}-#{self.number}&quot;</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/ /</span>, <span class="ruby-string">'-'</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&quot;@&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">GOOGLE_DOMAIN</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">email</span> = <span class="ruby-identifier">email</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">'&amp;'</span>, <span class="ruby-string">'and'</span>)
  <span class="ruby-identifier">email</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-string">'@west.cmu.edu'</span>, <span class="ruby-string">'@sv.cmu.edu'</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- build_email-source -->
          
        </div>

        

        
      </div><!-- build_email-method -->

    
      <div id="method-i-map_faculty_strings_to_users" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">map_faculty_strings_to_users</span><span
            class="method-args">(faculty_assignments_override_list)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="map_faculty_strings_to_users-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 344</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">map_faculty_strings_to_users</span>(<span class="ruby-identifier">faculty_assignments_override_list</span>)
  <span class="ruby-identifier">faculty_assignments_override_list</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">member_name</span><span class="ruby-operator">|</span> <span class="ruby-constant">User</span>.<span class="ruby-identifier">find_by_human_name</span>(<span class="ruby-identifier">member_name</span>) }
<span class="ruby-keyword">end</span></pre>
          </div><!-- map_faculty_strings_to_users-source -->
          
        </div>

        

        
      </div><!-- map_faculty_strings_to_users-method -->

    
      <div id="method-i-need_to_update_google_list-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">need_to_update_google_list?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="need_to_update_google_list-3F-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 331</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">need_to_update_google_list?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">email_changed?</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">updating_email</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- need_to_update_google_list-3F-source -->
          
        </div>

        

        
      </div><!-- need_to_update_google_list-3F-method -->

    
      <div id="method-i-set_grading_ranges" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_grading_ranges</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="set_grading_ranges-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 307</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_grading_ranges</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">grading_ranges</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-constant">GradingRange</span>.<span class="ruby-identifier">possible_grades</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">grade</span>, <span class="ruby-identifier">minimum</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">grading_ranges</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">grade</span><span class="ruby-operator">:</span> <span class="ruby-identifier">grade</span>, <span class="ruby-identifier">minimum</span><span class="ruby-operator">:</span> <span class="ruby-identifier">minimum</span>, <span class="ruby-identifier">active</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- set_grading_ranges-source -->
          
        </div>

        

        
      </div><!-- set_grading_ranges-method -->

    
      <div id="method-i-strip_whitespaces" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">strip_whitespaces</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="strip_whitespaces-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 315</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">strip_whitespaces</span>
  <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">self</span>[<span class="ruby-identifier">attr</span>] = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">strip</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- strip_whitespaces-source -->
          
        </div>

        

        
      </div><!-- strip_whitespaces-method -->

    
      <div id="method-i-update_distribution_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_distribution_list</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="update_distribution_list-source">
            <pre><span class="ruby-comment"># File app/models/course.rb, line 337</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_distribution_list</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">updating_email</span>
    <span class="ruby-identifier">recipients</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">faculty</span> <span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">registered_students</span> <span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">teams</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">team</span><span class="ruby-operator">|</span> <span class="ruby-identifier">team</span>.<span class="ruby-identifier">members</span> }.<span class="ruby-identifier">flatten</span>
    <span class="ruby-constant">Delayed</span><span class="ruby-operator">::</span><span class="ruby-constant">Job</span>.<span class="ruby-identifier">enqueue</span>(<span class="ruby-constant">GoogleMailingListJob</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">email</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">email</span>, <span class="ruby-identifier">recipients</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">email</span>, <span class="ruby-string">&quot;Course distribution list&quot;</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">id</span>, <span class="ruby-string">&quot;courses&quot;</span>))
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- update_distribution_list-source -->
          
        </div>

        

        
      </div><!-- update_distribution_list-method -->

    
    </section><!-- protected-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.10.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

